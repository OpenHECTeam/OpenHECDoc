### 硬件支撑包

Flyx-SOM硬件支撑包是主要有纯FPGA开发模式和SoC模式两种。其中纯FPGA模式的支撑包有RELAX\_FlyxSOM\_、\_RELAX\_FlyxSOM\_LED7SEG和RELAX\_FlyxSOM\_LED7SEG\_SRAM；SoC模式的支撑包有RELAXSoC\_FlyxSOM。

#### 一、纯FPGA模式支撑包系统结构

![](/assets/bc8467f329ecc5c4029b8af261be114b.png)

上图所示为纯FPGA方式下的实验系统结构图。红色虚线框中是FPGA逻辑部分，包含OpenHEC实验支撑包的逻辑与**lab\_top**为顶层的用户实验相关的逻辑。

**lab\_top**提供了用户实验与OpenHEC平台的所有硬件接口。用户逻辑区通过**lab\_top**提供的接口可以访问外部存储器和外设资源，可以与ARM处理器的UART终端程序进行通信。处理器内部管脚可以通过lab\_top提供的大量IO接口连接到OpenHEC实验平台，在实验平台的WEB端对这些IO进行监控。

---

#### 二、SoC模式支撑包系统结构

#### ![](/assets/37d3795ddcb39a1bc40b332c11c0b931.png)

OpenHEC项目支撑包面向FPGA SoC，当前版本主要支持Xilinx公司的Zynq系列芯片。Zynq系列芯片内包含通用的ARM处理器核心（PS部分）和FPGA可重构逻辑资源（PL部分），构成了典型的异构计算架构。Zynq系列处理器详细信息请参考Xilinx官方手册《DS190: Zynq-7000 All Programmable SoC Overview》。

软硬协同加速器包括软件功能部分、定制的硬件加速器和软硬件接口三个部分：

1. **定制硬件加速器部分**  
   对于一个算法，其最核心的部分是代码中花费时间最长的计算密集部分。将这一部分代码定制为硬件加速器，通过FPGA进行加速，可以显著提升算法性能。  
   为了便于硬件加速器的实现，OpenHEC项目支撑包将FPGA分为系统区和用户区两个部分。其中，系统区逻辑由OpenHEC平台提供，预先定义了加速器软硬件之间的接口逻辑。系统区的硬件逻辑以DCP文件方式包含在支撑包中，由项目支撑包管理和使用。这种方式便于用户进行快速系统集成。用户区只需要关注加速器IP的设计和实现，即把算法核心代码段实现为定制硬件IP核。加速器IP是硬件加速区的核心功能部分。项目支撑包会自动地将系统区（接口逻辑）和用户区（加速器IP）集成在一起，构成整个硬件加速器。

2. **软件功能部分**  
   除了核心部分以外，算法还包括一些外围功能，如数据文件的加载、输入数据的预处理、计算结果的处理等。这些外围功能可以仍然以软件方式，在通用处理器上执行。软件部分和硬件加速器部分相结合，协同工作，共同完成整个应用算法的功能。

3. **软硬件接口**  
   软硬件之间需要通过接口进行控制和数据交换。项目支撑包预定义了两个接口：控制接口和数据接口。其中，控制接口基于AXI4 Lite协议，主要用于加速器IP的参数配置及启动、暂停等运行时控制。数据接口基于AXI4协议，可以支持访问软硬件共享的DDR内存，支持burst传输模式，用于软硬件之间大量数据的交换。



